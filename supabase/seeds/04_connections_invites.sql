-- Seed data for connections and invites
-- Establishes relationships between test users

-- Connections from invite relationships (automatically created on signup)
-- user_a = inviter (requester), user_b = invitee (recipient), status = accepted
insert into connection (id, user_a, user_b, status, created_at) values
    -- Alice invited Bob
    ('55555555-5555-5555-5555-555555555501', '22222222-2222-2222-2222-222222222201', '22222222-2222-2222-2222-222222222202', 'accepted', '2025-10-25 14:30:00+00'),
    -- Alice invited Carol
    ('55555555-5555-5555-5555-555555555502', '22222222-2222-2222-2222-222222222201', '22222222-2222-2222-2222-222222222203', 'accepted', '2025-10-30 09:15:00+00'),
    -- Bob invited David
    ('55555555-5555-5555-5555-555555555503', '22222222-2222-2222-2222-222222222202', '22222222-2222-2222-2222-222222222204', 'accepted', '2025-11-04 11:00:00+00'),
    -- Carol invited Eve
    ('55555555-5555-5555-5555-555555555504', '22222222-2222-2222-2222-222222222203', '22222222-2222-2222-2222-222222222205', 'accepted', '2025-11-09 16:45:00+00')
on conflict (id) do nothing;

-- Additional connection requests
insert into connection (id, user_a, user_b, status, created_at) values
    -- Bob requested to connect with Carol (accepted)
    ('55555555-5555-5555-5555-555555555505', '22222222-2222-2222-2222-222222222202', '22222222-2222-2222-2222-222222222203', 'accepted', '2025-11-01 10:00:00+00'),
    -- David requested to connect with Alice (accepted)
    ('55555555-5555-5555-5555-555555555506', '22222222-2222-2222-2222-222222222204', '22222222-2222-2222-2222-222222222201', 'accepted', '2025-11-07 14:00:00+00'),
    -- Eve requested to connect with Bob (pending)
    ('55555555-5555-5555-5555-555555555507', '22222222-2222-2222-2222-222222222205', '22222222-2222-2222-2222-222222222202', 'pending', '2025-11-14 11:00:00+00'),
    -- Eve requested to connect with David (declined)
    ('55555555-5555-5555-5555-555555555508', '22222222-2222-2222-2222-222222222205', '22222222-2222-2222-2222-222222222204', 'declined', '2025-11-16 09:00:00+00')
on conflict (id) do nothing;

-- Invite records
insert into invite (id, inviter_id, invite_code, used_by, used_at, created_at) values
    -- Alice's used invites
    ('66666666-6666-6666-6666-666666666601', '22222222-2222-2222-2222-222222222201', 'ALICE001', '22222222-2222-2222-2222-222222222202', '2025-10-25 14:30:00+00', '2025-10-24 10:00:00+00'),
    ('66666666-6666-6666-6666-666666666602', '22222222-2222-2222-2222-222222222201', 'ALICE002', '22222222-2222-2222-2222-222222222203', '2025-10-30 09:15:00+00', '2025-10-29 08:00:00+00'),
    -- Bob's used invite
    ('66666666-6666-6666-6666-666666666603', '22222222-2222-2222-2222-222222222202', 'BOB00001', '22222222-2222-2222-2222-222222222204', '2025-11-04 11:00:00+00', '2025-11-03 15:00:00+00'),
    -- Carol's used invite
    ('66666666-6666-6666-6666-666666666604', '22222222-2222-2222-2222-222222222203', 'CAROL001', '22222222-2222-2222-2222-222222222205', '2025-11-09 16:45:00+00', '2025-11-08 12:00:00+00'),
    -- Unused invites for testing
    ('66666666-6666-6666-6666-666666666605', '22222222-2222-2222-2222-222222222201', 'TESTCODE', null, null, '2025-11-17 10:00:00+00'),
    ('66666666-6666-6666-6666-666666666606', '22222222-2222-2222-2222-222222222204', 'DAVID001', null, null, '2025-11-18 09:00:00+00')
on conflict (id) do nothing;

-- Revoked invite example
insert into invite (id, inviter_id, invite_code, revoked_at, created_at) values
    ('66666666-6666-6666-6666-666666666607', '22222222-2222-2222-2222-222222222202', 'REVOKED1', '2025-11-14 10:00:00+00', '2025-11-12 08:00:00+00')
on conflict (id) do nothing;
